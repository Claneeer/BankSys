{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"]}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":27},"end":{"line":2,"column":69,"index":96}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _axios = _interopRequireDefault(require(_dependencyMap[1], \"axios\"));\n  var _asyncStorage = _interopRequireDefault(require(_dependencyMap[2], \"@react-native-async-storage/async-storage\"));\n  const API_BASE_URL = process.env.EXPO_PUBLIC_BACKEND_URL;\n  class AuthController {\n    token = null;\n    async login(credentials) {\n      try {\n        const response = await _axios.default.post(`${API_BASE_URL}/api/auth/login`, credentials);\n        const authData = response.data;\n\n        // Store token\n        this.token = authData.access_token;\n        await _asyncStorage.default.setItem('auth_token', authData.access_token);\n        await _asyncStorage.default.setItem('user_data', JSON.stringify(authData.user));\n        return authData;\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    }\n    async register(userData) {\n      try {\n        const response = await _axios.default.post(`${API_BASE_URL}/api/auth/register`, userData);\n        return response.data;\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    }\n    async logout() {\n      this.token = null;\n      await _asyncStorage.default.removeItem('auth_token');\n      await _asyncStorage.default.removeItem('user_data');\n    }\n    async getCurrentUser() {\n      try {\n        const token = await this.getToken();\n        if (!token) return null;\n        const response = await _axios.default.get(`${API_BASE_URL}/api/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        return response.data;\n      } catch (error) {\n        await this.logout(); // Clear invalid token\n        return null;\n      }\n    }\n    async getToken() {\n      if (this.token) return this.token;\n      try {\n        const token = await _asyncStorage.default.getItem('auth_token');\n        this.token = token;\n        return token;\n      } catch (error) {\n        return null;\n      }\n    }\n    async getStoredUser() {\n      try {\n        const userDataStr = await _asyncStorage.default.getItem('user_data');\n        return userDataStr ? JSON.parse(userDataStr) : null;\n      } catch (error) {\n        return null;\n      }\n    }\n    async isAuthenticated() {\n      const token = await this.getToken();\n      return !!token;\n    }\n\n    // Helper method to get headers with auth token\n    async getAuthHeaders() {\n      const token = await this.getToken();\n      return token ? {\n        Authorization: `Bearer ${token}`\n      } : {};\n    }\n  }\n  var _default = exports.default = new AuthController();\n});","lineCount":86,"map":[[7,2,1,0],[7,6,1,0,"_axios"],[7,12,1,0],[7,15,1,0,"_interopRequireDefault"],[7,37,1,0],[7,38,1,0,"require"],[7,45,1,0],[7,46,1,0,"_dependencyMap"],[7,60,1,0],[8,2,2,0],[8,6,2,0,"_asyncStorage"],[8,19,2,0],[8,22,2,0,"_interopRequireDefault"],[8,44,2,0],[8,45,2,0,"require"],[8,52,2,0],[8,53,2,0,"_dependencyMap"],[8,67,2,0],[9,2,5,0],[9,8,5,6,"API_BASE_URL"],[9,20,5,18],[9,23,5,21,"process"],[9,30,5,28],[9,31,5,29,"env"],[9,34,5,32],[9,35,5,33,"EXPO_PUBLIC_BACKEND_URL"],[9,58,5,56],[10,2,7,0],[10,8,7,6,"AuthController"],[10,22,7,20],[10,23,7,21],[11,4,8,10,"token"],[11,9,8,15],[11,12,8,33],[11,16,8,37],[12,4,10,2],[12,10,10,8,"login"],[12,15,10,13,"login"],[12,16,10,14,"credentials"],[12,27,10,43],[12,29,10,68],[13,6,11,4],[13,10,11,8],[14,8,12,6],[14,14,12,12,"response"],[14,22,12,20],[14,25,12,23],[14,31,12,29,"axios"],[14,45,12,34],[14,46,12,35,"post"],[14,50,12,39],[14,51,12,40],[14,54,12,43,"API_BASE_URL"],[14,66,12,55],[14,83,12,72],[14,85,12,74,"credentials"],[14,96,12,85],[14,97,12,86],[15,8,13,6],[15,14,13,12,"authData"],[15,22,13,34],[15,25,13,37,"response"],[15,33,13,45],[15,34,13,46,"data"],[15,38,13,50],[17,8,15,6],[18,8,16,6],[18,12,16,10],[18,13,16,11,"token"],[18,18,16,16],[18,21,16,19,"authData"],[18,29,16,27],[18,30,16,28,"access_token"],[18,42,16,40],[19,8,17,6],[19,14,17,12,"AsyncStorage"],[19,35,17,24],[19,36,17,25,"setItem"],[19,43,17,32],[19,44,17,33],[19,56,17,45],[19,58,17,47,"authData"],[19,66,17,55],[19,67,17,56,"access_token"],[19,79,17,68],[19,80,17,69],[20,8,18,6],[20,14,18,12,"AsyncStorage"],[20,35,18,24],[20,36,18,25,"setItem"],[20,43,18,32],[20,44,18,33],[20,55,18,44],[20,57,18,46,"JSON"],[20,61,18,50],[20,62,18,51,"stringify"],[20,71,18,60],[20,72,18,61,"authData"],[20,80,18,69],[20,81,18,70,"user"],[20,85,18,74],[20,86,18,75],[20,87,18,76],[21,8,20,6],[21,15,20,13,"authData"],[21,23,20,21],[22,6,21,4],[22,7,21,5],[22,8,21,6],[22,15,21,13,"error"],[22,20,21,23],[22,22,21,25],[23,8,22,6],[23,14,22,12],[23,18,22,16,"Error"],[23,23,22,21],[23,24,22,22,"error"],[23,29,22,27],[23,30,22,28,"response"],[23,38,22,36],[23,40,22,38,"data"],[23,44,22,42],[23,46,22,44,"detail"],[23,52,22,50],[23,56,22,54],[23,70,22,68],[23,71,22,69],[24,6,23,4],[25,4,24,2],[26,4,26,2],[26,10,26,8,"register"],[26,18,26,16,"register"],[26,19,26,17,"userData"],[26,27,26,39],[26,29,26,56],[27,6,27,4],[27,10,27,8],[28,8,28,6],[28,14,28,12,"response"],[28,22,28,20],[28,25,28,23],[28,31,28,29,"axios"],[28,45,28,34],[28,46,28,35,"post"],[28,50,28,39],[28,51,28,40],[28,54,28,43,"API_BASE_URL"],[28,66,28,55],[28,86,28,75],[28,88,28,77,"userData"],[28,96,28,85],[28,97,28,86],[29,8,29,6],[29,15,29,13,"response"],[29,23,29,21],[29,24,29,22,"data"],[29,28,29,26],[30,6,30,4],[30,7,30,5],[30,8,30,6],[30,15,30,13,"error"],[30,20,30,23],[30,22,30,25],[31,8,31,6],[31,14,31,12],[31,18,31,16,"Error"],[31,23,31,21],[31,24,31,22,"error"],[31,29,31,27],[31,30,31,28,"response"],[31,38,31,36],[31,40,31,38,"data"],[31,44,31,42],[31,46,31,44,"detail"],[31,52,31,50],[31,56,31,54],[31,77,31,75],[31,78,31,76],[32,6,32,4],[33,4,33,2],[34,4,35,2],[34,10,35,8,"logout"],[34,16,35,14,"logout"],[34,17,35,14],[34,19,35,32],[35,6,36,4],[35,10,36,8],[35,11,36,9,"token"],[35,16,36,14],[35,19,36,17],[35,23,36,21],[36,6,37,4],[36,12,37,10,"AsyncStorage"],[36,33,37,22],[36,34,37,23,"removeItem"],[36,44,37,33],[36,45,37,34],[36,57,37,46],[36,58,37,47],[37,6,38,4],[37,12,38,10,"AsyncStorage"],[37,33,38,22],[37,34,38,23,"removeItem"],[37,44,38,33],[37,45,38,34],[37,56,38,45],[37,57,38,46],[38,4,39,2],[39,4,41,2],[39,10,41,8,"getCurrentUser"],[39,24,41,22,"getCurrentUser"],[39,25,41,22],[39,27,41,47],[40,6,42,4],[40,10,42,8],[41,8,43,6],[41,14,43,12,"token"],[41,19,43,17],[41,22,43,20],[41,28,43,26],[41,32,43,30],[41,33,43,31,"getToken"],[41,41,43,39],[41,42,43,40],[41,43,43,41],[42,8,44,6],[42,12,44,10],[42,13,44,11,"token"],[42,18,44,16],[42,20,44,18],[42,27,44,25],[42,31,44,29],[43,8,46,6],[43,14,46,12,"response"],[43,22,46,20],[43,25,46,23],[43,31,46,29,"axios"],[43,45,46,34],[43,46,46,35,"get"],[43,49,46,38],[43,50,46,39],[43,53,46,42,"API_BASE_URL"],[43,65,46,54],[43,79,46,68],[43,81,46,70],[44,10,47,8,"headers"],[44,17,47,15],[44,19,47,17],[45,12,47,19,"Authorization"],[45,25,47,32],[45,27,47,34],[45,37,47,44,"token"],[45,42,47,49],[46,10,47,52],[47,8,48,6],[47,9,48,7],[47,10,48,8],[48,8,50,6],[48,15,50,13,"response"],[48,23,50,21],[48,24,50,22,"data"],[48,28,50,26],[49,6,51,4],[49,7,51,5],[49,8,51,6],[49,15,51,13,"error"],[49,20,51,18],[49,22,51,20],[50,8,52,6],[50,14,52,12],[50,18,52,16],[50,19,52,17,"logout"],[50,25,52,23],[50,26,52,24],[50,27,52,25],[50,28,52,26],[50,29,52,27],[51,8,53,6],[51,15,53,13],[51,19,53,17],[52,6,54,4],[53,4,55,2],[54,4,57,2],[54,10,57,8,"getToken"],[54,18,57,16,"getToken"],[54,19,57,16],[54,21,57,43],[55,6,58,4],[55,10,58,8],[55,14,58,12],[55,15,58,13,"token"],[55,20,58,18],[55,22,58,20],[55,29,58,27],[55,33,58,31],[55,34,58,32,"token"],[55,39,58,37],[56,6,60,4],[56,10,60,8],[57,8,61,6],[57,14,61,12,"token"],[57,19,61,17],[57,22,61,20],[57,28,61,26,"AsyncStorage"],[57,49,61,38],[57,50,61,39,"getItem"],[57,57,61,46],[57,58,61,47],[57,70,61,59],[57,71,61,60],[58,8,62,6],[58,12,62,10],[58,13,62,11,"token"],[58,18,62,16],[58,21,62,19,"token"],[58,26,62,24],[59,8,63,6],[59,15,63,13,"token"],[59,20,63,18],[60,6,64,4],[60,7,64,5],[60,8,64,6],[60,15,64,13,"error"],[60,20,64,18],[60,22,64,20],[61,8,65,6],[61,15,65,13],[61,19,65,17],[62,6,66,4],[63,4,67,2],[64,4,69,2],[64,10,69,8,"getStoredUser"],[64,23,69,21,"getStoredUser"],[64,24,69,21],[64,26,69,46],[65,6,70,4],[65,10,70,8],[66,8,71,6],[66,14,71,12,"userDataStr"],[66,25,71,23],[66,28,71,26],[66,34,71,32,"AsyncStorage"],[66,55,71,44],[66,56,71,45,"getItem"],[66,63,71,52],[66,64,71,53],[66,75,71,64],[66,76,71,65],[67,8,72,6],[67,15,72,13,"userDataStr"],[67,26,72,24],[67,29,72,27,"JSON"],[67,33,72,31],[67,34,72,32,"parse"],[67,39,72,37],[67,40,72,38,"userDataStr"],[67,51,72,49],[67,52,72,50],[67,55,72,53],[67,59,72,57],[68,6,73,4],[68,7,73,5],[68,8,73,6],[68,15,73,13,"error"],[68,20,73,18],[68,22,73,20],[69,8,74,6],[69,15,74,13],[69,19,74,17],[70,6,75,4],[71,4,76,2],[72,4,78,2],[72,10,78,8,"isAuthenticated"],[72,25,78,23,"isAuthenticated"],[72,26,78,23],[72,28,78,44],[73,6,79,4],[73,12,79,10,"token"],[73,17,79,15],[73,20,79,18],[73,26,79,24],[73,30,79,28],[73,31,79,29,"getToken"],[73,39,79,37],[73,40,79,38],[73,41,79,39],[74,6,80,4],[74,13,80,11],[74,14,80,12],[74,15,80,13,"token"],[74,20,80,18],[75,4,81,2],[77,4,83,2],[78,4,84,2],[78,10,84,8,"getAuthHeaders"],[78,24,84,22,"getAuthHeaders"],[78,25,84,22],[78,27,84,66],[79,6,85,4],[79,12,85,10,"token"],[79,17,85,15],[79,20,85,18],[79,26,85,24],[79,30,85,28],[79,31,85,29,"getToken"],[79,39,85,37],[79,40,85,38],[79,41,85,39],[80,6,86,4],[80,13,86,11,"token"],[80,18,86,16],[80,21,86,19],[81,8,86,21,"Authorization"],[81,21,86,34],[81,23,86,36],[81,33,86,46,"token"],[81,38,86,51],[82,6,86,54],[82,7,86,55],[82,10,86,58],[82,11,86,59],[82,12,86,60],[83,4,87,2],[84,2,88,0],[85,2,88,1],[85,6,88,1,"_default"],[85,14,88,1],[85,17,88,1,"exports"],[85,24,88,1],[85,25,88,1,"default"],[85,32,88,1],[85,35,90,15],[85,39,90,19,"AuthController"],[85,53,90,33],[85,54,90,34],[85,55,90,35],[86,0,90,35],[86,3]],"functionMap":{"names":["<global>","AuthController","login","register","logout","getCurrentUser","getToken","getStoredUser","isAuthenticated","getAuthHeaders"],"mappings":"AAA;ACM;ECG;GDc;EEE;GFO;EGE;GHI;EIE;GJc;EKE;GLU;EME;GNO;EOE;GPG;EQG;GRG;CDC"}},"type":"js/module"}]}